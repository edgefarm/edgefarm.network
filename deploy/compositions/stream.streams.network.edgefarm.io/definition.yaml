## WARNING: This file was autogenerated!
## Manual modifications will be overwritten
## unless ignore: true is set in generate.yaml!
## Last Modification: 07:33:00 on 03-30-2023.

apiVersion: apiextensions.crossplane.io/v1
kind: CompositeResourceDefinition
metadata:
  name: xstreams.streams.network.edgefarm.io
spec:
  claimNames:
    kind: Stream
    plural: streams
  group: streams.network.edgefarm.io
  names:
    categories:
    - crossplane
    - composition
    - streams
    kind: XStream
    plural: xstreams
  versions:
  - additionalPrinterColumns:
    - jsonPath: .metadata.annotations.crossplane\.io/external-name
      name: EXTERNAL-NAME
      type: string
    - jsonPath: .spec.forProvider.domain
      name: DOMAIN
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: AGE
      type: date
    - jsonPath: .status.atProvider.connection.address
      name: ADDRESS
      priority: 1
      type: string
    - jsonPath: .status.atProvider.connection.accountPublicKey
      name: ACCOUNT PUB KEY
      priority: 1
      type: string
    - jsonPath: .status.atProvider.state.messages
      name: MESSAGES
      priority: 1
      type: string
    - jsonPath: .status.atProvider.state.bytes
      name: BYTES
      priority: 1
      type: string
    - jsonPath: .status.atProvider.state.consumerCount
      name: CONSUMERS
      priority: 1
      type: string
    name: v1alpha1
    referenceable: true
    schema:
      openAPIV3Schema:
        properties:
          spec:
            description: A StreamSpec defines the desired state of a Stream.
            properties:
              deletionPolicy:
                default: Delete
                description: DeletionPolicy specifies what will happen to the underlying
                  external when this managed resource is deleted - either "Delete"
                  or "Orphan" the external resource.
                enum:
                - Orphan
                - Delete
                type: string
              forProvider:
                description: StreamParameters are the configurable fields of a Stream.
                properties:
                  config:
                    description: Config is the stream configuration.
                    properties:
                      allowDirect:
                        description: AllowDirect is a flag that if true and the stream
                          has more than one replica, each replica will respond to
                          direct get requests for individual messages, not only the
                          leader.
                        type: boolean
                      allowRollup:
                        description: AllowRollup is a flag to allow the use of the
                          Nats-Rollup header to replace all contents of a stream,
                          or subject in a stream, with a single new message.
                        type: boolean
                      denyDelete:
                        description: DenyDelete is a flag to restrict the ability
                          to delete messages from a stream via the API.
                        type: boolean
                      denyPurge:
                        description: DenyPurge is a flag to restrict the ability to
                          purge messages from a stream via the API.
                        type: boolean
                      description:
                        description: Description is a human readable description of
                          the stream.
                        type: string
                      discard:
                        default: Old
                        description: 'Discard defines the behavior of discarding messages
                          when any streams'' limits have been reached. Old (default):
                          This policy will delete the oldest messages in order to
                          maintain the limit. For example, if MaxAge is set to one
                          minute, the server will automatically delete messages older
                          than one minute with this policy. New: This policy will
                          reject new messages from being appended to the stream if
                          it would exceed one of the limits. An extension to this
                          policy is DiscardNewPerSubject which will apply this policy
                          on a per-subject basis within the stream.'
                        enum:
                        - Old
                        - New
                        type: string
                      discardNewPerSubject:
                        default: false
                        description: DiscardOldPerSubject will discard old messages
                          per subject.
                        type: boolean
                      duplicates:
                        default: 2m0s
                        description: Duplicates defines the time window within which
                          to track duplicate messages.
                        pattern: ^(([0-9]+[smh]){1,3})$
                        type: string
                      maxAge:
                        default: 0s
                        description: MaxAge is the maximum age of a message in the
                          stream. Format is a string duration, e.g. 1h, 1m, 1s, 1h30m
                          or 2h3m4s.
                        pattern: ([0-9]+h)?([0-9]+m)?([0-9]+s)?
                        type: string
                      maxBytes:
                        default: -1
                        description: MaxBytes defines how many bytes the Stream may
                          contain. Adheres to Discard Policy, removing oldest or refusing
                          new messages if the Stream exceeds this size.
                        format: int64
                        type: integer
                      maxConsumers:
                        default: -1
                        description: MaxConsumers defines how many Consumers can be
                          defined for a given Stream. Define -1 for unlimited.
                        type: integer
                      maxMsgSize:
                        default: -1
                        description: MaxBytesPerSubject defines the largest message
                          that will be accepted by the Stream.
                        format: int32
                        minimum: -1
                        type: integer
                      maxMsgs:
                        default: -1
                        description: MaxMsgs defines how many messages may be in a
                          Stream. Adheres to Discard Policy, removing oldest or refusing
                          new messages if the Stream exceeds this number of messages.
                        format: int64
                        type: integer
                      maxMsgsPerSubject:
                        default: -1
                        description: MaxMsgsPerSubject defines the limits how many
                          messages in the stream to retain per subject.
                        format: int64
                        minimum: -1
                        type: integer
                      mirror:
                        description: Mirror is the mirror configuration for the stream.
                        properties:
                          domain:
                            description: Domain is the JetStream domain of where the
                              origin stream exists. This is commonly used between
                              a cluster/supercluster and a leaf node/cluster.
                            type: string
                          external:
                            description: External is the external stream configuration.
                            properties:
                              apiPrefix:
                                description: APIPrefix is the prefix for the API of
                                  the external stream.
                                type: string
                              deliverPrefix:
                                description: DeliverPrefix is the prefix for the deliver
                                  subject of the external stream.
                                type: string
                            required:
                            - apiPrefix
                            type: object
                          filterSubject:
                            description: FilterSubject is an optional filter subject
                              which will include only messages that match the subject,
                              typically including a wildcard.
                            type: string
                          name:
                            description: Name of the origin stream to source messages
                              from.
                            type: string
                          startSeq:
                            description: StartSeq is an optional start sequence the
                              of the origin stream to start mirroring from.
                            format: int64
                            type: integer
                          startTime:
                            description: StartTime is an optional message start time
                              to start mirroring from. Any messages that are equal
                              to or greater than the start time will be included.
                              The time format is RFC 3339, e.g. 2023-01-09T14:48:32Z
                            pattern: ^((?:(\d{4}-\d{2}-\d{2})T(\d{2}:\d{2}:\d{2}(?:\.\d+)?))(Z|[\+-]\d{2}:\d{2})?)$
                            type: string
                        required:
                        - name
                        type: object
                      mirrorDirect:
                        description: MirrorDirect is a flag that if true, and the
                          stream is a mirror, the mirror will participate in a serving
                          direct get requests for individual messages from origin
                          stream.
                        type: boolean
                      noAck:
                        default: false
                        description: NoAck is a flag to disable acknowledging messages
                          that are received by the Stream.
                        type: boolean
                      placement:
                        description: Placement is the placement policy for the stream.
                        properties:
                          cluster:
                            description: Cluster is the name of the Jetstream cluster.
                            type: string
                          tags:
                            description: Tags defines a list of server tags.
                            items:
                              type: string
                            type: array
                        required:
                        - cluster
                        type: object
                      rePublish:
                        description: Allow republish of the message after being sequenced
                          and stored.
                        properties:
                          destination:
                            description: Destination is the destination subject messages
                              will be re-published to. The source and destination
                              must be a valid subject mapping. For information on
                              subject mapping see https://docs.nats.io/jetstream/concepts/subjects#subject-mapping
                            type: string
                          headersOnly:
                            description: HeadersOnly defines if true, that the message
                              data will not be included in the re-published message,
                              only an additional header Nats-Msg-Size indicating the
                              size of the message in bytes.
                            type: boolean
                          source:
                            default: '>'
                            description: Source is an optional subject pattern which
                              is a subset of the subjects bound to the stream. It
                              defaults to all messages in the stream, e.g. >.
                            type: string
                        required:
                        - destination
                        - source
                        type: object
                      replicas:
                        default: 1
                        description: Replicas defines how many replicas to keep for
                          each message in a clustered JetStream.
                        maximum: 5
                        minimum: 1
                        type: integer
                      retention:
                        default: Limits
                        description: Retention defines the retention policy for the
                          stream.
                        enum:
                        - Limits
                        - Interest
                        - WorkQueue
                        type: string
                      sealed:
                        description: Sealed is a flag to prevent message deletion
                          from  the stream  via limits or API.
                        type: boolean
                      sources:
                        description: Sources is the list of one or more sources configurations
                          for the stream.
                        items:
                          description: StreamSource dictates how streams can source
                            from other streams.
                          properties:
                            domain:
                              description: Domain is the JetStream domain of where
                                the origin stream exists. This is commonly used between
                                a cluster/supercluster and a leaf node/cluster.
                              type: string
                            external:
                              description: External is the external stream configuration.
                              properties:
                                apiPrefix:
                                  description: APIPrefix is the prefix for the API
                                    of the external stream.
                                  type: string
                                deliverPrefix:
                                  description: DeliverPrefix is the prefix for the
                                    deliver subject of the external stream.
                                  type: string
                              required:
                              - apiPrefix
                              type: object
                            filterSubject:
                              description: FilterSubject is an optional filter subject
                                which will include only messages that match the subject,
                                typically including a wildcard.
                              type: string
                            name:
                              description: Name of the origin stream to source messages
                                from.
                              type: string
                            startSeq:
                              description: StartSeq is an optional start sequence
                                the of the origin stream to start mirroring from.
                              format: int64
                              type: integer
                            startTime:
                              description: StartTime is an optional message start
                                time to start mirroring from. Any messages that are
                                equal to or greater than the start time will be included.
                                The time format is RFC 3339, e.g. 2023-01-09T14:48:32Z
                              pattern: ^((?:(\d{4}-\d{2}-\d{2})T(\d{2}:\d{2}:\d{2}(?:\.\d+)?))(Z|[\+-]\d{2}:\d{2})?)$
                              type: string
                          required:
                          - name
                          type: object
                        type: array
                      storage:
                        default: File
                        description: Storage defines the storage type for stream data..
                        enum:
                        - File
                        - Memory
                        type: string
                      subjects:
                        description: Subjects is a list of subjects to consume, supports
                          wildcards.
                        items:
                          type: string
                        type: array
                      template:
                        description: Template is the owner of the template associated
                          with this stream.
                        type: string
                    required:
                    - discard
                    - maxBytes
                    - maxConsumers
                    - maxMsgs
                    - retention
                    - storage
                    type: object
                  domain:
                    description: Domain is the Jetstream domain in which the stream
                      is created.
                    type: string
                required:
                - config
                type: object
              providerConfigRef:
                description: ProviderConfigReference specifies how the provider that
                  will be used to create, observe, update, and delete this managed
                  resource should be configured.
                properties:
                  name:
                    description: Name of the referenced object.
                    type: string
                  policy:
                    description: Policies for referencing.
                    properties:
                      resolution:
                        default: Required
                        description: Resolution specifies whether resolution of this
                          reference is required. The default is 'Required', which
                          means the reconcile will fail if the reference cannot be
                          resolved. 'Optional' means this reference will be a no-op
                          if it cannot be resolved.
                        enum:
                        - Required
                        - Optional
                        type: string
                      resolve:
                        description: Resolve specifies when this reference should
                          be resolved. The default is 'IfNotPresent', which will attempt
                          to resolve the reference only when the corresponding field
                          is not present. Use 'Always' to resolve the reference on
                          every reconcile.
                        enum:
                        - Always
                        - IfNotPresent
                        type: string
                    type: object
                required:
                - name
                type: object
            required:
            - forProvider
            type: object
          status:
            description: A StreamStatus represents the observed state of a Stream.
            properties:
              atProvider:
                description: StreamObservation are the observable fields of a Stream.
                properties:
                  clusterInfo:
                    description: ClusterInfo shows information about the underlying
                      set of servers that make up the stream.
                    properties:
                      leader:
                        description: Leader is the leader of the cluster.
                        type: string
                      name:
                        description: Name is the name of the cluster.
                        type: string
                      replicas:
                        description: Replicas are the replicas of the cluster.
                        items:
                          description: PeerInfo shows information about all the peers
                            in the cluster that are supporting the stream or consumer.
                          properties:
                            active:
                              type: string
                            current:
                              type: boolean
                            lag:
                              format: int64
                              type: integer
                            name:
                              type: string
                            offline:
                              type: boolean
                          required:
                          - active
                          - current
                          - name
                          type: object
                        type: array
                    type: object
                  connection:
                    description: Connection shows information about the connection
                      to the stream.
                    properties:
                      accountPublicKey:
                        description: AccountPublicKey is the public key of the used
                          account.
                        type: string
                      address:
                        description: Address is the address of the connection.
                        type: string
                      userPublicKey:
                        description: UserPublicKey is the public key of the used user.
                        type: string
                    required:
                    - accountPublicKey
                    - address
                    - userPublicKey
                    type: object
                  domain:
                    description: Domain is the Jetstream domain in which the stream
                      is created.
                    type: string
                  state:
                    description: State is the current state of the stream
                    properties:
                      bytes:
                        description: Bytes is the number of bytes in the stream.
                        type: string
                      consumerCount:
                        description: ConsumerCount is the number of consumers in the
                          stream.
                        type: integer
                      deleted:
                        description: Deleted TBD
                        items:
                          format: int64
                          type: integer
                        type: array
                      firstSequence:
                        description: FirstSequence is the first sequence number in
                          the stream.
                        format: int64
                        type: integer
                      firstTimestamp:
                        description: FirstTimestamp is the first timestamp in the
                          stream.
                        type: string
                      lastSequence:
                        description: LastSequence is the last sequence number in the
                          stream.
                        format: int64
                        type: integer
                      lastTimestamp:
                        description: LastTimestamp is the last timestamp in the stream.
                        type: string
                      messages:
                        description: Mesasges is the number of messages in the stream.
                        format: int64
                        type: integer
                      numDeleted:
                        description: NumDeleted TBD
                        type: integer
                      numSubjects:
                        description: NumSubjects is the number of subjects in the
                          stream.
                        format: int64
                        type: integer
                      subjects:
                        additionalProperties:
                          format: int64
                          type: integer
                        description: Subjects is a map of subjects to their number
                          of messages.
                        type: object
                    required:
                    - bytes
                    - consumerCount
                    - firstSequence
                    - lastSequence
                    - messages
                    type: object
                type: object
              observed:
                description: Freeform field containing information about the observed
                  status.
                type: object
                x-kubernetes-preserve-unknown-fields: true
              uid:
                description: The unique ID of this Stream resource reported by the
                  provider
                type: string
            type: object
    served: true
