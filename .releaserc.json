{
  "branches": [
    {
      "name": "main"
    },
    {
      "name": "beta",
      "prerelease": true
    }
  ],
  "plugins": [
    "@semantic-release/commit-analyzer",
    [
      "@semantic-release/exec",
      {
        "prepareCmd": "docker build -t network-resource-info -f cmd/network-resource-info/Dockerfile ."
      }
    ],
    [
      "@semantic-release/exec",
      {
        "prepareCmd": "cd crossplane-functions/streams/ && docker build -t xfn-streams ."
      }
    ],
    [
      "@semantic-release/exec",
      {
        "prepareCmd": "cd crossplane-functions/users/ && docker build -t xfn-users ."
      }
    ],
    [
      "@semantic-release/exec",
      {
        "prepareCmd": "cd crossplane-functions/edgenetworks/ && docker build -t xfn-edgenetworks ."
      }
    ],
    [
      "@semantic-release/exec",
      {
        "prepareCmd": "cd crossplane-functions/log2webhook/ && docker build -t xfn-log2webhook ."
      }
    ],
    [
      "@eclass/semantic-release-docker",
      {
        "baseImageName": "network-resource-info",
        "registries": [
          {
            "url": "ghcr.io",
            "imageName": "ghcr.io/edgefarm/edgefarm.network/network-resource-info",
            "user": "GITHUB_USER",
            "password": "GITHUB_TOKEN"
          }
        ]
      }
    ],
    [
      "@eclass/semantic-release-docker",
      {
        "baseImageName": "xfn-users",
        "registries": [
          {
            "url": "ghcr.io",
            "imageName": "ghcr.io/edgefarm/edgefarm.network/xfn-users",
            "user": "GITHUB_USER",
            "password": "GITHUB_TOKEN"
          }
        ]
      }
    ],
    [
      "@eclass/semantic-release-docker",
      {
        "baseImageName": "xfn-streams",
        "registries": [
          {
            "url": "ghcr.io",
            "imageName": "ghcr.io/edgefarm/edgefarm.network/xfn-streams",
            "user": "GITHUB_USER",
            "password": "GITHUB_TOKEN"
          }
        ]
      }
    ],
    [
      "@eclass/semantic-release-docker",
      {
        "baseImageName": "xfn-edgenetworks",
        "registries": [
          {
            "url": "ghcr.io",
            "imageName": "ghcr.io/edgefarm/edgefarm.network/xfn-edgenetworks",
            "user": "GITHUB_USER",
            "password": "GITHUB_TOKEN"
          }
        ]
      }
    ],
    [
      "@eclass/semantic-release-docker",
      {
        "baseImageName": "xfn-log2webhook",
        "registries": [
          {
            "url": "ghcr.io",
            "imageName": "ghcr.io/edgefarm/edgefarm.network/xfn-log2webhook",
            "user": "GITHUB_USER",
            "password": "GITHUB_TOKEN"
          }
        ]
      }
    ],
    [
      "@semantic-release/exec",
      {
        "prepareCmd": "sed -i \"s#ghcr.io/edgefarm/edgefarm.network/network-resource-info:.*#ghcr.io/edgefarm/edgefarm.network/network-resource-info:${nextRelease.version}#g\" deploy/network-resource-info/deployment.yaml"
      }
    ],
    [
      "@semantic-release/exec",
      {
        "prepareCmd": "sed -i \"s#ghcr.io/edgefarm/edgefarm.network/xfn-users:.*#ghcr.io/edgefarm/edgefarm.network/xfn-users:${nextRelease.version}#g\" deploy/compositions/network.streams.network.edgefarm.io/composition.yaml"
      }
    ],
    [
      "@semantic-release/exec",
      {
        "prepareCmd": "sed -i \"s#ghcr.io/edgefarm/edgefarm.network/xfn-streams:.*#ghcr.io/edgefarm/edgefarm.network/xfn-streams:${nextRelease.version}#g\" deploy/compositions/network.streams.network.edgefarm.io/composition.yaml"
      }
    ],
    [
      "@semantic-release/exec",
      {
        "prepareCmd": "sed -i \"s#ghcr.io/edgefarm/edgefarm.network/xfn-edgenetworks:.*#ghcr.io/edgefarm/edgefarm.network/xfn-edgenetworks:${nextRelease.version}#g\" deploy/compositions/network.streams.network.edgefarm.io/composition.yaml"
      }
    ],
    [
      "@semantic-release/exec",
      {
        "prepareCmd": "sed -i \"s#ghcr.io/edgefarm/edgefarm.network/xfn-log2webhook:.*#ghcr.io/edgefarm/edgefarm.network/xfn-log2webhook:${nextRelease.version}#g\" deploy/compositions/network.streams.network.edgefarm.io/composition.yaml"
      }
    ],
    [
      "@semantic-release/exec",
      {
        "prepareCmd": "sed -i \"s#ghcr.io/edgefarm/edgefarm.network/xfn-log2webhook:.*#ghcr.io/edgefarm/edgefarm.network/xfn-log2webhook:${nextRelease.version}#g\" crossplane-functions/log2webhook/Readme.md"
      }
    ],
    [
      "@semantic-release/git",
      {
        "assets": [
          "deploy/compositions/network.streams.network.edgefarm.io/composition.yaml",
          "deploy/network-resource-info/deployment.yaml"
        ],
        "message": "chore(release): ${nextRelease.version} [skip ci]\n\n${nextRelease.notes}"
      }
    ],
    "@semantic-release/release-notes-generator",
    "@semantic-release/github"
  ]
}